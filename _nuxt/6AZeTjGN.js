import{_ as M,r,o as C,v as g,x as s,J as x,K as N,L as w,M as S,N as T,O as k,y as v,t as c,B as b}from"./D_XAfW0X.js";const V={setup(){const l=r([]),e=r("en-US"),i=r(""),a=r(""),d=r(""),p=r([]),n=r(!1),u=r(!1);let y;const f=()=>speechSynthesis.getVoices().map(o=>({code:o.lang,name:`${o.name} (${o.lang})`})),R=async()=>{try{const t=await self.ai.languageModel.capabilities();console.log(t),y=await self.ai.languageModel.create({systemPrompt:"You are a multilingual assistant. You will teach students their desired language by conversing with them.",monitor(o){o.addEventListener("downloadprogress",m=>{console.log(`Downloaded ${m.loaded} of ${m.total} bytes.`)})}}),console.log(y)}catch(t){console.error("Failed to create language model session:",t),alert("The language model API is unavailable. Please try again later.")}};C(async()=>{try{l.value=f(),l.value.length||(speechSynthesis.onvoiceschanged=()=>{l.value=f()}),await R();const t=JSON.parse(localStorage.getItem("conversationHistory")||"[]");p.value=t}catch(t){console.error("Error during initialization:",t)}});const _=()=>{E(async t=>{i.value=t,await L(t)})},L=async t=>{try{console.log(y),u.value=!0,a.value="";const o=await y.promptStreaming(t);for await(const m of o)a.value+=m;u.value=!1,await A(a.value),H(t,{original:a.value,translated:d.value}),n.value&&h(d.value)}catch(o){console.error("Error fetching streaming response:",o),u.value=!1}},A=async t=>{try{const o=await self.translation.createTranslator({sourceLanguage:navigator.language.split("-")[0],targetLanguage:e.value.split("-")[0]});d.value=await o.translate(t)}catch(o){console.error("Error translating AI response:",o),d.value=t}},H=(t,o)=>{const m={user:t,assistant:o};p.value.push(m),localStorage.setItem("conversationHistory",JSON.stringify(p.value))},h=t=>{const o=new SpeechSynthesisUtterance(t);o.lang=e.value,speechSynthesis.speak(o)};return{languages:l,selectedLanguage:e,spokenText:i,streamingResponse:a,translatedResponse:d,conversationHistory:p,autoSpeech:n,isStreaming:u,startRecognition:_,speak:h}}};function E(l){const e=new(window.SpeechRecognition||window.webkitSpeechRecognition);e.lang=navigator.language,e.interimResults=!1,e.maxAlternatives=1,e.onresult=i=>{const a=i.results[0][0].transcript;l(a)},e.onerror=i=>{console.error("Speech recognition error:",i.error),alert("Speech recognition failed. Please try again.")},e.start()}const B={class:"min-h-screen bg-gradient-to-b from-black via-gray-900 to-black py-10 text-white"},I={class:"max-w-2xl mx-auto bg-gray-800 p-6 rounded-lg shadow-lg"},O={class:"mb-6"},P=["value"],U={class:"mb-6 flex items-center"},D={class:"mb-6"},J={key:0,class:"mb-6"},Y={class:"space-y-4 bg-gray-900 p-4 rounded-lg"},z={class:"text-sm text-gray-300"},F={class:"text-sm text-blue-400"},K={class:"text-sm text-green-400"},j={key:1,class:"mb-6"},q={class:"bg-gray-900 p-4 rounded-lg text-blue-300 text-sm"};function G(l,e,i,a,d,p){return c(),g("div",B,[s("div",I,[e[10]||(e[10]=s("h1",{class:"text-3xl font-semibold tracking-wide mb-6 text-center text-gray-100"},"Shake Lingo Conversational Assistant",-1)),s("div",O,[e[3]||(e[3]=s("label",{for:"language",class:"block text-sm font-medium text-gray-400 mb-2"},"Select Target Language",-1)),x(s("select",{id:"language","onUpdate:modelValue":e[0]||(e[0]=n=>a.selectedLanguage=n),class:"w-full bg-gray-900 text-gray-300 py-2 px-4 rounded-lg border border-gray-700 focus:outline-none focus:ring focus:ring-blue-500"},[(c(!0),g(w,null,S(a.languages,n=>(c(),g("option",{key:n.code,value:n.code},v(n.name),9,P))),128))],512),[[N,a.selectedLanguage]])]),s("div",U,[e[4]||(e[4]=s("label",{for:"autoSpeech",class:"text-sm font-medium text-gray-400"},"Auto Speak Responses",-1)),x(s("input",{id:"autoSpeech",type:"checkbox","onUpdate:modelValue":e[1]||(e[1]=n=>a.autoSpeech=n),class:"ml-4 h-5 w-5 text-blue-500 bg-gray-900 border-gray-700 focus:ring focus:ring-blue-500 rounded-lg"},null,512),[[T,a.autoSpeech]])]),s("div",D,[s("button",{onClick:e[2]||(e[2]=(...n)=>a.startRecognition&&a.startRecognition(...n)),class:"w-full bg-gradient-to-r from-blue-500 via-teal-500 to-blue-500 text-white py-3 px-6 rounded-lg font-semibold shadow-md hover:shadow-lg hover:scale-105 transform transition"}," Speak ")]),a.conversationHistory.length>0?(c(),g("div",J,[e[8]||(e[8]=s("h2",{class:"text-lg font-medium tracking-wide mb-4 text-gray-100"},"Conversation History",-1)),s("ul",Y,[(c(!0),g(w,null,S(a.conversationHistory,(n,u)=>(c(),g("li",{key:u,class:"border-b border-gray-700 pb-4 last:border-b-0"},[s("p",z,[e[5]||(e[5]=s("strong",null,"You:",-1)),b(" "+v(n.user),1)]),s("p",F,[e[6]||(e[6]=s("strong",null,"Assistant (Original):",-1)),b(" "+v(n.assistant.original),1)]),s("p",K,[e[7]||(e[7]=s("strong",null,"Assistant (Translated):",-1)),b(" "+v(n.assistant.translated),1)])]))),128))])])):k("",!0),a.isStreaming?(c(),g("div",j,[e[9]||(e[9]=s("h2",{class:"text-lg font-medium tracking-wide mb-4 text-gray-100"},"Streaming Response",-1)),s("div",q,v(a.streamingResponse),1)])):k("",!0)])])}const W=M(V,[["render",G]]);export{W as default};
